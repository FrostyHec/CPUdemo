circuit ImmGen :
  module ImmGen :
    input clock : Clock
    input reset : UInt<1>
    input io_raw_imm : UInt<32>
    input io_unsigned : UInt<1>
    input io_imm_width : UInt<2>
    output io_real_imm : UInt<32>

    node _T = eq(UInt<1>("h0"), io_imm_width) @[ImmGen.scala 17:23]
    node _io_real_imm_T = mux(UInt<1>("h0"), UInt<21>("h1fffff"), UInt<21>("h0")) @[Bitwise.scala 77:12]
    node _io_real_imm_T_1 = bits(io_raw_imm, 11, 0) @[ImmGen.scala 20:53]
    node _io_real_imm_T_2 = cat(_io_real_imm_T, _io_real_imm_T_1) @[Cat.scala 33:92]
    node _io_real_imm_T_3 = bits(io_raw_imm, 11, 11) @[ImmGen.scala 22:47]
    node _io_real_imm_T_4 = bits(_io_real_imm_T_3, 0, 0) @[Bitwise.scala 77:15]
    node _io_real_imm_T_5 = mux(_io_real_imm_T_4, UInt<21>("h1fffff"), UInt<21>("h0")) @[Bitwise.scala 77:12]
    node _io_real_imm_T_6 = bits(io_raw_imm, 11, 0) @[ImmGen.scala 22:64]
    node _io_real_imm_T_7 = cat(_io_real_imm_T_5, _io_real_imm_T_6) @[Cat.scala 33:92]
    node _GEN_0 = mux(io_unsigned, _io_real_imm_T_2, _io_real_imm_T_7) @[ImmGen.scala 19:24 20:21 22:21]
    node _T_1 = eq(UInt<1>("h1"), io_imm_width) @[ImmGen.scala 17:23]
    node _io_real_imm_T_8 = mux(UInt<1>("h0"), UInt<19>("h7ffff"), UInt<19>("h0")) @[Bitwise.scala 77:12]
    node _io_real_imm_T_9 = bits(io_raw_imm, 11, 11) @[ImmGen.scala 27:53]
    node _io_real_imm_T_10 = bits(io_raw_imm, 0, 0) @[ImmGen.scala 27:69]
    node _io_real_imm_T_11 = bits(io_raw_imm, 10, 1) @[ImmGen.scala 27:84]
    node io_real_imm_lo = cat(_io_real_imm_T_11, UInt<1>("h0")) @[Cat.scala 33:92]
    node io_real_imm_hi_hi = cat(_io_real_imm_T_8, _io_real_imm_T_9) @[Cat.scala 33:92]
    node io_real_imm_hi = cat(io_real_imm_hi_hi, _io_real_imm_T_10) @[Cat.scala 33:92]
    node _io_real_imm_T_12 = cat(io_real_imm_hi, io_real_imm_lo) @[Cat.scala 33:92]
    node _io_real_imm_T_13 = bits(io_raw_imm, 11, 11) @[ImmGen.scala 29:47]
    node _io_real_imm_T_14 = bits(_io_real_imm_T_13, 0, 0) @[Bitwise.scala 77:15]
    node _io_real_imm_T_15 = mux(_io_real_imm_T_14, UInt<20>("hfffff"), UInt<20>("h0")) @[Bitwise.scala 77:12]
    node _io_real_imm_T_16 = bits(io_raw_imm, 0, 0) @[ImmGen.scala 29:64]
    node _io_real_imm_T_17 = bits(io_raw_imm, 10, 1) @[ImmGen.scala 29:79]
    node io_real_imm_lo_1 = cat(_io_real_imm_T_17, UInt<1>("h0")) @[Cat.scala 33:92]
    node io_real_imm_hi_1 = cat(_io_real_imm_T_15, _io_real_imm_T_16) @[Cat.scala 33:92]
    node _io_real_imm_T_18 = cat(io_real_imm_hi_1, io_real_imm_lo_1) @[Cat.scala 33:92]
    node _GEN_1 = mux(io_unsigned, _io_real_imm_T_12, _io_real_imm_T_18) @[ImmGen.scala 26:24 27:21 29:21]
    node _T_2 = eq(UInt<2>("h2"), io_imm_width) @[ImmGen.scala 17:23]
    node _io_real_imm_T_19 = mux(UInt<1>("h0"), UInt<11>("h7ff"), UInt<11>("h0")) @[Bitwise.scala 77:12]
    node _io_real_imm_T_20 = bits(io_raw_imm, 19, 19) @[ImmGen.scala 34:53]
    node _io_real_imm_T_21 = bits(io_raw_imm, 7, 0) @[ImmGen.scala 34:69]
    node _io_real_imm_T_22 = bits(io_raw_imm, 8, 8) @[ImmGen.scala 34:87]
    node _io_real_imm_T_23 = bits(io_raw_imm, 18, 9) @[ImmGen.scala 34:103]
    node io_real_imm_lo_hi = cat(_io_real_imm_T_22, _io_real_imm_T_23) @[Cat.scala 33:92]
    node io_real_imm_lo_2 = cat(io_real_imm_lo_hi, UInt<1>("h0")) @[Cat.scala 33:92]
    node io_real_imm_hi_hi_1 = cat(_io_real_imm_T_19, _io_real_imm_T_20) @[Cat.scala 33:92]
    node io_real_imm_hi_2 = cat(io_real_imm_hi_hi_1, _io_real_imm_T_21) @[Cat.scala 33:92]
    node _io_real_imm_T_24 = cat(io_real_imm_hi_2, io_real_imm_lo_2) @[Cat.scala 33:92]
    node _io_real_imm_T_25 = bits(io_raw_imm, 19, 19) @[ImmGen.scala 36:47]
    node _io_real_imm_T_26 = bits(_io_real_imm_T_25, 0, 0) @[Bitwise.scala 77:15]
    node _io_real_imm_T_27 = mux(_io_real_imm_T_26, UInt<12>("hfff"), UInt<12>("h0")) @[Bitwise.scala 77:12]
    node _io_real_imm_T_28 = bits(io_raw_imm, 7, 0) @[ImmGen.scala 36:64]
    node _io_real_imm_T_29 = bits(io_raw_imm, 8, 8) @[ImmGen.scala 36:82]
    node _io_real_imm_T_30 = bits(io_raw_imm, 18, 9) @[ImmGen.scala 36:98]
    node io_real_imm_lo_3 = cat(_io_real_imm_T_30, UInt<1>("h0")) @[Cat.scala 33:92]
    node io_real_imm_hi_hi_2 = cat(_io_real_imm_T_27, _io_real_imm_T_28) @[Cat.scala 33:92]
    node io_real_imm_hi_3 = cat(io_real_imm_hi_hi_2, _io_real_imm_T_29) @[Cat.scala 33:92]
    node _io_real_imm_T_31 = cat(io_real_imm_hi_3, io_real_imm_lo_3) @[Cat.scala 33:92]
    node _GEN_2 = mux(io_unsigned, _io_real_imm_T_24, _io_real_imm_T_31) @[ImmGen.scala 33:24 34:21 36:21]
    node _T_3 = eq(UInt<2>("h3"), io_imm_width) @[ImmGen.scala 17:23]
    node _io_real_imm_T_32 = bits(io_raw_imm, 19, 0) @[ImmGen.scala 40:36]
    node _io_real_imm_T_33 = mux(UInt<1>("h0"), UInt<12>("hfff"), UInt<12>("h0")) @[Bitwise.scala 77:12]
    node _io_real_imm_T_34 = cat(_io_real_imm_T_32, _io_real_imm_T_33) @[Cat.scala 33:92]
    node _GEN_3 = validif(_T_3, _io_real_imm_T_34) @[ImmGen.scala 17:23 40:19]
    node _GEN_4 = mux(_T_2, _GEN_2, _GEN_3) @[ImmGen.scala 17:23]
    node _GEN_5 = mux(_T_1, _GEN_1, _GEN_4) @[ImmGen.scala 17:23]
    node _GEN_6 = mux(_T, _GEN_0, _GEN_5) @[ImmGen.scala 17:23]
    io_real_imm <= bits(_GEN_6, 31, 0)
